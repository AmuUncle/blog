{"title":"客户端通信安全设计","uid":"47c166aa1551adcab409a420e5d0d7ce","slug":"其他/客户端通信安全设计","date":"2023-05-23T05:29:48.000Z","updated":"2023-06-05T07:26:20.328Z","comments":true,"path":"api/articles/其他/客户端通信安全设计.json","keywords":null,"cover":null,"content":"<h1 id=\"消息传输方案\"><a href=\"#消息传输方案\" class=\"headerlink\" title=\"消息传输方案\"></a>消息传输方案</h1><h2 id=\"方案一\"><a href=\"#方案一\" class=\"headerlink\" title=\"方案一\"></a>方案一</h2><ul>\n<li>公钥加密，私钥解密</li>\n<li>握手后，采用对称加密<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">    participant A as 客户端A</span><br><span class=\"line\">    participant B as 客户端B</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送好友查找广播消息</span><br><span class=\"line\">    B-&gt;&gt;+B: 组建本身信息，广播发送出来</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到广播消息后，添加到好友列表内</span><br><span class=\"line\">    A-&gt;&gt;+B: 建立连接并发送握手消息</span><br><span class=\"line\">    B--&gt;&gt;+A: 收到握手消息后，提示用户是否允许聊天</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送加密后的随机密码</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到密码后，利用私钥解密密码</span><br><span class=\"line\">    A-&gt;&gt;B: 使用此密码进行对称加密，进行消息传输</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"方案二\"><a href=\"#方案二\" class=\"headerlink\" title=\"方案二\"></a>方案二</h2><ul>\n<li>两套公钥和私钥</li>\n<li>分别使用对方公钥加密，自身私钥解密<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">    participant A as 客户端A</span><br><span class=\"line\">    participant B as 客户端B</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送好友查找广播消息</span><br><span class=\"line\">    B-&gt;&gt;+B: 组建本身信息，广播发送出来</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到广播消息后，添加到好友列表内</span><br><span class=\"line\">    A-&gt;&gt;+B: 连接并发送握手消息</span><br><span class=\"line\">    B--&gt;&gt;+A: 收到握手消息后，提示是否允许聊天</span><br><span class=\"line\">    B--&gt;&gt;+A: 发送携带公钥的接受消息</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送自己的公钥</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到公钥后，回复成功消息完成握手仪式</span><br><span class=\"line\">    A-&gt;&gt;B: 使用对方公钥进行消息加解密，进行聊天</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"方案三\"><a href=\"#方案三\" class=\"headerlink\" title=\"方案三\"></a>方案三</h2><ul>\n<li>两套公钥和私钥</li>\n<li>分别使用对方公钥加密，自身私钥解密</li>\n<li>每个消息都使用自身私钥对消息的哈希值进程加密签名，从而验证消息的完整性和来源<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequenceDiagram</span><br><span class=\"line\">    participant A as 客户端A</span><br><span class=\"line\">    participant B as 客户端B</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送好友查找广播消息</span><br><span class=\"line\">    B-&gt;&gt;+B: 组建本身信息，广播发送出来</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到广播消息后，添加到好友列表内</span><br><span class=\"line\">    A-&gt;&gt;+B: 连接并发送握手消息</span><br><span class=\"line\">    B--&gt;&gt;+A: 收到握手消息后，提示是否允许聊天</span><br><span class=\"line\">    B--&gt;&gt;+A: 发送携带公钥的接受消息</span><br><span class=\"line\">    A-&gt;&gt;+B: 发送自己的公钥</span><br><span class=\"line\">    B--&gt;&gt;-A: 收到公钥后，回复成功消息完成握手仪式</span><br><span class=\"line\">    A-&gt;&gt;+B: 使用哈希算法对消息进行计算得到散列值M</span><br><span class=\"line\">    A-&gt;&gt;+B: 使用私钥将散列值M进行加密得到签名S</span><br><span class=\"line\">    A-&gt;&gt;+B: 使用A的公钥将消息加密得到M2</span><br><span class=\"line\">    A-&gt;&gt;+B: 将消息M2和签名S发送给B</span><br><span class=\"line\">    B--&gt;&gt;+A: 收到消息M2和签名S后，用私钥解密M2并得到M3</span><br><span class=\"line\">    B--&gt;&gt;-A: 用A的公钥解密签名S并得到签名S1</span><br><span class=\"line\">    B-&gt;&gt;+A: 对M3使用相同哈希算法计算散列值得到M4，并根据S1和M4是否一致判断消息的真实性</span><br></pre></td></tr></table></figure></li>\n</ul>\n","text":"消息传输方案方案一 公钥加密，私钥解密 握手后，采用对称加密1234567891011sequenceDiagram participant A as 客户端A...","permalink":"/post/其他/客户端通信安全设计","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"其他教程","slug":"其他教程","count":4,"path":"api/categories/其他教程.json"}],"tags":[{"name":"加密","slug":"加密","count":1,"path":"api/tags/加密.json"},{"name":"aes","slug":"aes","count":1,"path":"api/tags/aes.json"},{"name":"rsa","slug":"rsa","count":1,"path":"api/tags/rsa.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B6%88%E6%81%AF%E4%BC%A0%E8%BE%93%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">消息传输方案</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88%E4%B8%80\"><span class=\"toc-text\">方案一</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88%E4%BA%8C\"><span class=\"toc-text\">方案二</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%A1%88%E4%B8%89\"><span class=\"toc-text\">方案三</span></a></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"OpenSSL库实现AES加解密算法","uid":"5ad5ce4ee7b2f8c117390804baa8feb4","slug":"其他/OpenSSL库实现AES加解密算法","date":"2023-05-23T05:29:48.000Z","updated":"2023-06-05T07:20:56.114Z","comments":true,"path":"api/articles/其他/OpenSSL库实现AES加解密算法.json","keywords":null,"cover":null,"text":"下面是使用OpenSSL库进行AES-128-CBC加密和解密，支持PKCS7Padding、PKCS5Padding、ZEROPadding三种填充方式的示例...","permalink":"/post/其他/OpenSSL库实现AES加解密算法","photos":[],"count_time":{"symbolsCount":"12k","symbolsTime":"11 mins."},"categories":[{"name":"其他教程","slug":"其他教程","count":4,"path":"api/categories/其他教程.json"}],"tags":[{"name":"openssl","slug":"openssl","count":1,"path":"api/tags/openssl.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Qt状态机与Qt动画的结合使用","uid":"71fd0f421f976303f8841082c0a437ed","slug":"Qt/进阶教程/Qt状态机与Qt动画的结合使用","date":"2023-05-13T05:46:53.000Z","updated":"2023-05-19T05:34:19.752Z","comments":true,"path":"api/articles/Qt/进阶教程/Qt状态机与Qt动画的结合使用.json","keywords":null,"cover":null,"text":"Qt状态机与Qt动画的结合使用Qt是一个流行的跨平台应用程序框架，它可以帮助开发者轻松地创建面向对象的GUI应用程序。Qt框架提供了许多有用的工具和库，其中包括...","permalink":"/post/Qt/进阶教程/Qt状态机与Qt动画的结合使用","photos":[],"count_time":{"symbolsCount":"8.6k","symbolsTime":"8 mins."},"categories":[{"name":"Qt进阶教程","slug":"Qt进阶教程","count":23,"path":"api/categories/Qt进阶教程.json"}],"tags":[{"name":"Qt","slug":"Qt","count":59,"path":"api/tags/Qt.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}