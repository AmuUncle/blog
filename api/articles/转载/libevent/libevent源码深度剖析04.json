{"title":"【转载】libevent源码深度剖析04","uid":"21cc3849aa98d79b1da8af8304100d2a","slug":"转载/libevent/libevent源码深度剖析04","date":"2021-05-06T09:27:48.000Z","updated":"2023-05-19T05:34:22.341Z","comments":true,"path":"api/articles/转载/libevent/libevent源码深度剖析04.json","keywords":null,"cover":null,"content":"<h1 id=\"libevent源码深度剖析04\"><a href=\"#libevent源码深度剖析04\" class=\"headerlink\" title=\"libevent源码深度剖析04\"></a>libevent源码深度剖析04</h1><h3 id=\"1-前言\"><a href=\"#1-前言\" class=\"headerlink\" title=\"1. 前言\"></a>1. 前言</h3><p>详细分析源代码之前，如果能对其代码文件的基本结构有个大概的认识和分类，对于代码的分析将是大有裨益的。本节内容不多，我想并不是说它不重要！</p>\n<h3 id=\"2-源代码组织结构\"><a href=\"#2-源代码组织结构\" class=\"headerlink\" title=\"2. 源代码组织结构\"></a>2. 源代码组织结构</h3><p>Libevent的源代码虽然都在一层文件夹下面，但是其代码分类还是相当清晰的，主要可分为头文件、内部使用的头文件、辅助功能函数、日志、libevent框架、对系统I&#x2F;O多路复用机制的封装、信号管理、定时事件管理、缓冲区管理、基本数据结构和基于libevent的两个实用库等几个部分，有些部分可能就是一个源文件。<br>源代码中的test部分就不在我们关注的范畴了。<br>1）头文件<br>主要就是<strong>event.h</strong>：事件宏定义、接口函数声明，主要结构体event的声明；<br>2）内部头文件<br><strong>xxx-internal.h</strong>：内部数据结构和函数，对外不可见，以达到信息隐藏的目的；<br>3）libevent框架<br><strong>event.c</strong>：event整体框架的代码实现；<br>4）对系统I&#x2F;O多路复用机制的封装<br><strong>epoll.c</strong>：对epoll的封装；<br><strong>select.c</strong>：对select的封装；<br><strong>devpoll.c</strong>：对dev&#x2F;poll的封装;<br><strong>kqueue.c</strong>：对kqueue的封装；<br>5）定时事件管理<br><strong>min-heap.h</strong>：其实就是一个以时间作为key的小根堆结构；<br>6）信号管理<br><strong>signal.c</strong>：对信号事件的处理；<br>7）辅助功能函数<br><strong>evutil.h</strong> 和<strong>evutil.c</strong>：一些辅助功能函数，包括创建socket pair和一些时间操作函数：加、减和比较等。<br>8）日志<br><strong>log.h</strong>和<strong>log.c</strong>：log日志函数<br>9）缓冲区管理<br><strong>evbuffer.c</strong>和<strong>buffer.c</strong>：libevent对缓冲区的封装；<br>10）基本数据结构<br><strong>compat&#x2F;sys</strong>下的两个源文件：queue.h是libevent基本数据结构的实现，包括链表，双向链表，队列等；_libevent_time.h：一些用于时间操作的结构体定义、函数和宏定义；<br>11）实用网络库<br><strong>http</strong>和<strong>evdns</strong>：是基于libevent实现的http服务器和异步dns查询库；</p>\n<h3 id=\"3-小结\"><a href=\"#3-小结\" class=\"headerlink\" title=\"3. 小结\"></a>3. 小结</h3><p>本节介绍了libevent的组织和分类，下面将会详细介绍libevent的核心部分event结构。</p>\n","text":"libevent源码深度剖析041. 前言详细分析源代码之前，如果能对其代码文件的基本结构有个大概的认识和分类，对于代码的分析将是大有裨益的。本节内容不多，我想...","permalink":"/post/转载/libevent/libevent源码深度剖析04","photos":[],"count_time":{"symbolsCount":935,"symbolsTime":"1 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"libevent","slug":"libevent","count":13,"path":"api/tags/libevent.json"},{"name":"源码解析","slug":"源码解析","count":13,"path":"api/tags/源码解析.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#libevent%E6%BA%90%E7%A0%81%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%9004\"><span class=\"toc-text\">libevent源码深度剖析04</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">1. 前言</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%BA%90%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">2. 源代码组织结构</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">3. 小结</span></a></li></ol></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"【转载】libevent源码深度剖析03","uid":"dd54cd62e1387361117c63cf12445709","slug":"转载/libevent/libevent源码深度剖析03","date":"2021-05-06T09:27:48.000Z","updated":"2023-05-19T05:34:22.340Z","comments":true,"path":"api/articles/转载/libevent/libevent源码深度剖析03.json","keywords":null,"cover":[],"text":"libevent源码深度剖析03libevent基本使用场景和事件流程1. 前言学习源代码该从哪里入手？我觉得从程序的基本使用场景和代码的整体处理流程入手是个不...","permalink":"/post/转载/libevent/libevent源码深度剖析03","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"libevent","slug":"libevent","count":13,"path":"api/tags/libevent.json"},{"name":"源码解析","slug":"源码解析","count":13,"path":"api/tags/源码解析.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"【转载】libevent源码深度剖析05","uid":"e23144502108769556e4aa73a855e4ee","slug":"转载/libevent/libevent源码深度剖析05","date":"2021-05-06T09:27:48.000Z","updated":"2023-05-19T05:34:22.341Z","comments":true,"path":"api/articles/转载/libevent/libevent源码深度剖析05.json","keywords":null,"cover":[],"text":"libevent源码深度剖析05libevent的核心：事件event 对事件处理流程有了高层的认识后，本节将详细介绍libevent的核心结构event，以及...","permalink":"/post/转载/libevent/libevent源码深度剖析05","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"libevent","slug":"libevent","count":13,"path":"api/tags/libevent.json"},{"name":"源码解析","slug":"源码解析","count":13,"path":"api/tags/源码解析.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}