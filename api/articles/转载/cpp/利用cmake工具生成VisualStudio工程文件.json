{"title":"【转载】利用cmake工具生成VisualStudio工程文件","uid":"0e9060ff12875a627166c3e18b56f8f7","slug":"转载/cpp/利用cmake工具生成VisualStudio工程文件","date":"2021-05-06T09:27:48.000Z","updated":"2024-11-11T08:31:27.041Z","comments":true,"path":"api/articles/转载/cpp/利用cmake工具生成VisualStudio工程文件.json","keywords":null,"cover":[],"content":"<h2 id=\"利用-cmake-工具生成-Visual-Studio-工程文件\"><a href=\"#利用-cmake-工具生成-Visual-Studio-工程文件\" class=\"headerlink\" title=\"利用 cmake 工具生成 Visual Studio 工程文件\"></a>利用 cmake 工具生成 Visual Studio 工程文件</h2><p>对于习惯了 Visual Studio 强大的管理项目、编码和调试功能的读者来说，在 Linux 下使用 gcc&#x2F;g++ 编译、使用 gdb 调试是一件何其痛苦的事情，对于大多数的开源 C&#x2F;C++ 项目，如果我们不在意 Windows 和 Linux 在一些底层 API 接口上的使用差别，想熟悉该项目的执行脉络和原理，在 Windows 上使用 Visual Studio 调试该项目也未尝不可。凡是可以使用 CMake 工具编译的 Linux 程序（即提供了 <strong>CMakeLists.txt</strong> 文件），我们同样也可以利用 CMake 工具生成 Windows 上的 Visual Studio 工程文件。</p>\n<p>这里我们以著名的开源网络库 <strong>libuv</strong> 为例。</p>\n<p>从 <strong>libuv</strong> 的官方地址提供的下载链接：<a href=\"https://dist.libuv.org/dist/\">https://dist.libuv.org/dist/</a> 下载最新的 <strong>libuv</strong> 的源码得到文件 <strong>libuv-v1.31.0.tar.gz</strong>（笔者写作此书时，libuv 最新版本是 1.31.0），解压该文件。作者的机器上我将代码解压至 *<em>F:\\mycode\\libuv-v1.31.0*</em> ，解压后的目录中确实存在一个 <strong>CMakeLists.txt</strong> 文件，如下图所示：</p>\n<p><img src=\"/images/posts/%E8%BD%AC%E8%BD%BD/imgs/../imgs/cmake1.png\" alt=\"img\"></p>\n<p>启动 Windows 上的 CMake 图形化工具（<strong>cmake-gui</strong>），按下图进行设置：</p>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"img\"></p>\n<p>设置完成之后，点击界面上的<strong>Configure</strong> 按钮，会提示 vsprojects 目录不存在，提示是否创建，我们点击 <strong>Yes</strong> 进行创建。</p>\n<p><img src=\"/images/posts/%E8%BD%AC%E8%BD%BD/imgs/../imgs/cmake2.png\" alt=\"img\"></p>\n<p>如果您的机器上安装了多个版本的Visual Studio，接下来会弹窗对话框让我们选择要生成的工程文件对应的 Visual Studio 版本号。读者可以根据自己的实际情况按需选择。我这里选择 Visual Studio 2019。</p>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"img\"></p>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"img\"></p>\n<p>点击 <strong>Finish</strong> 按钮后开始启动 CMake 的检测和配置工作。等待一会儿，CMake 底部的输出框中提示 “Configuring Done” 表示配置工作已经完成。</p>\n<p><img src=\"/images/posts/%E8%BD%AC%E8%BD%BD/imgs/../imgs/cmake3.png\" alt=\"img\"></p>\n<p>接下来点击 <strong>Generate</strong> 按钮即可生成所选版本的 Visual Studio 工程文件，生成的文件位于 vsprojects 目录。</p>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"img\"></p>\n<p>我们可以在界面上点击按钮 <strong>Open Project</strong> 按钮直接打开工程文件，也可以找到对应目录下的 <strong>libuv.sln</strong> 打开。</p>\n<p>打开后如下图所示：</p>\n<p><img src=\"/images/posts/%E8%BD%AC%E8%BD%BD/imgs/../imgs/cmake4.png\" alt=\"img\"></p>\n<p>接下来，我们就可以使用 Visual Studio 愉快地进行编译和调试了。</p>\n<p>让我们再深入聊一下上述过程：在点击 <strong>Configure</strong> 按钮之后，和在 Linux 下执行 cmake 命令一样，CMake 工具也是在检测所在的系统环境是否匹配 CMakeLists.txt 中定义的各种环境，本质上是生成了一份可以在 Windows 上编译和运行的代码（也就是说该源码支持在 Windows 上运行） 。因此，对于很多虽然提供了 CMakeLists.txt 文件但并不支持在 Windows 上运行的的 Linux 工程，虽然利用上述方法也能最终生成 Visual Studio 工程文件，但是这些文件并不能在 Windows 上直接无错编译和调试。</p>\n<blockquote>\n<p>由于不同的 CMake 版本支持的 CMakeLists.txt 中的语法可能略有细微差别，有些 CMakeLists.txt 文件在使用上述方法 <strong>configure</strong> 时可能会产生一些错误，需要读者做些修改才能通过。</p>\n</blockquote>\n","text":"利用 cmake 工具生成 Visual Studio 工程文件对于习惯了 Visual Studio 强大的管理项目、编码和调试功能的读者来说，在 Linux...","permalink":"/post/转载/cpp/利用cmake工具生成VisualStudio工程文件","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"学习资料","slug":"学习资料","count":26,"path":"api/tags/学习资料.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%A9%E7%94%A8-cmake-%E5%B7%A5%E5%85%B7%E7%94%9F%E6%88%90-Visual-Studio-%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">利用 cmake 工具生成 Visual Studio 工程文件</span></a></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"【转载】你一定要搞明白的C函数调用方式与栈原理","uid":"c9abbbdef4e88dc3f27e1c9bd42d47df","slug":"转载/cpp/你一定要搞明白的C函数调用方式与栈原理","date":"2021-05-06T09:27:48.000Z","updated":"2024-11-11T08:31:27.041Z","comments":true,"path":"api/articles/转载/cpp/你一定要搞明白的C函数调用方式与栈原理.json","keywords":null,"cover":[],"text":"你一定要搞明白的C函数调用方式与栈原理写在前面的话 这绝对不是标题党。而是C/C++开发中你必须要掌握的基础知识，也是高级技术岗位面试中高频题。我真的真的真的希...","permalink":"/post/转载/cpp/你一定要搞明白的C函数调用方式与栈原理","photos":[],"count_time":{"symbolsCount":"9.2k","symbolsTime":"8 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"学习资料","slug":"学习资料","count":26,"path":"api/tags/学习资料.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"【转载】如何使用VisualStudio管理和阅读开源项目代码","uid":"3add2e8130af8265f056561f93db8e22","slug":"转载/cpp/如何使用VisualStudio管理和阅读开源项目代码","date":"2021-05-06T09:27:48.000Z","updated":"2024-11-11T08:31:27.041Z","comments":true,"path":"api/articles/转载/cpp/如何使用VisualStudio管理和阅读开源项目代码.json","keywords":null,"cover":[],"text":"如何使用 Visual Studio 管理和阅读开源项目代码对于 Linux C/C++ 项目，虽然我们在 Linux 系统中使用 gdb 去调试，但是通常情况...","permalink":"/post/转载/cpp/如何使用VisualStudio管理和阅读开源项目代码","photos":[],"count_time":{"symbolsCount":892,"symbolsTime":"1 mins."},"categories":[{"name":"转载","slug":"转载","count":50,"path":"api/categories/转载.json"}],"tags":[{"name":"c++","slug":"c","count":35,"path":"api/tags/c.json"},{"name":"学习资料","slug":"学习资料","count":26,"path":"api/tags/学习资料.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}