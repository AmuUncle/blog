{"title":"Qt绘制指针时钟","uid":"1175242b1cb2123c73e3f30548ab2dd7","slug":"Qt/基础教程/Qt绘制指针时钟","date":"2021-09-29T04:34:06.000Z","updated":"2023-05-19T05:34:19.708Z","comments":true,"path":"api/articles/Qt/基础教程/Qt绘制指针时钟.json","keywords":null,"cover":null,"content":"<h1 id=\"Qt绘制指针时钟\"><a href=\"#Qt绘制指针时钟\" class=\"headerlink\" title=\"Qt绘制指针时钟\"></a>Qt绘制指针时钟</h1><h2 id=\"什么是Qt？\"><a href=\"#什么是Qt？\" class=\"headerlink\" title=\"什么是Qt？\"></a>什么是Qt？</h2><p>Qt是一款跨平台的C++应用程序开发框架，它提供了一套完整的工具和库，可以帮助开发者快速构建高质量的应用程序。Qt支持多种操作系统和开发语言，包括Windows、Linux、macOS、Android、iOS等，同时也支持C++、Python、JavaScript等多种编程语言。</p>\n<h2 id=\"指针时钟的作用和效果\"><a href=\"#指针时钟的作用和效果\" class=\"headerlink\" title=\"指针时钟的作用和效果\"></a>指针时钟的作用和效果</h2><p>指针时钟是一种常见的时钟显示方式，它通过指针的旋转来显示时间，具有简洁、直观、美观等特点。在Qt中，我们可以使用QPainter类来绘制指针时钟，同时也可以通过QTimer类来实现时钟的更新。</p>\n<h2 id=\"绘制指针时钟的代码示例\"><a href=\"#绘制指针时钟的代码示例\" class=\"headerlink\" title=\"绘制指针时钟的代码示例\"></a>绘制指针时钟的代码示例</h2><p>下面是一个简单的示例代码，演示了如何绘制一个指针时钟：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;QtWidgets&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ClockWidget</span> : <span class=\"keyword\">public</span> QWidget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">ClockWidget</span>(QWidget *parent = <span class=\"literal\">nullptr</span>) : <span class=\"built_in\">QWidget</span>(parent)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setFixedSize</span>(<span class=\"number\">200</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\">        QTimer *timer = <span class=\"keyword\">new</span> <span class=\"built_in\">QTimer</span>(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        <span class=\"built_in\">connect</span>(timer, &amp;QTimer::timeout, <span class=\"keyword\">this</span>, QOverload&lt;&gt;::<span class=\"built_in\">of</span>(&amp;ClockWidget::update));</span><br><span class=\"line\">        timer-&gt;<span class=\"built_in\">start</span>(<span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">paintEvent</span><span class=\"params\">(QPaintEvent *event)</span> <span class=\"keyword\">override</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">Q_UNUSED</span>(event);</span><br><span class=\"line\">        <span class=\"function\">QPainter <span class=\"title\">painter</span><span class=\"params\">(<span class=\"keyword\">this</span>)</span></span>;</span><br><span class=\"line\">        painter.<span class=\"built_in\">setRenderHint</span>(QPainter::Antialiasing);</span><br><span class=\"line\">        painter.<span class=\"built_in\">translate</span>(<span class=\"built_in\">width</span>() / <span class=\"number\">2</span>, <span class=\"built_in\">height</span>() / <span class=\"number\">2</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">scale</span>(<span class=\"built_in\">width</span>() / <span class=\"number\">200.0</span>, <span class=\"built_in\">height</span>() / <span class=\"number\">200.0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 绘制表盘</span></span><br><span class=\"line\">        painter.<span class=\"built_in\">setPen</span>(Qt::NoPen);</span><br><span class=\"line\">        painter.<span class=\"built_in\">setBrush</span>(Qt::white);</span><br><span class=\"line\">        painter.<span class=\"built_in\">drawEllipse</span>(<span class=\"number\">-90</span>, <span class=\"number\">-90</span>, <span class=\"number\">180</span>, <span class=\"number\">180</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 绘制刻度</span></span><br><span class=\"line\">        painter.<span class=\"built_in\">setPen</span>(<span class=\"built_in\">QPen</span>(Qt::black, <span class=\"number\">2</span>));</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">12</span>; ++i) &#123;</span><br><span class=\"line\">            painter.<span class=\"built_in\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">-80</span>, <span class=\"number\">0</span>, <span class=\"number\">-70</span>);</span><br><span class=\"line\">            painter.<span class=\"built_in\">rotate</span>(<span class=\"number\">30</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 绘制时针</span></span><br><span class=\"line\">        painter.<span class=\"built_in\">save</span>();</span><br><span class=\"line\">        painter.<span class=\"built_in\">rotate</span>(<span class=\"number\">30</span> * QTime::<span class=\"built_in\">currentTime</span>().<span class=\"built_in\">hour</span>() + QTime::<span class=\"built_in\">currentTime</span>().<span class=\"built_in\">minute</span>() / <span class=\"number\">2.0</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">setPen</span>(<span class=\"built_in\">QPen</span>(Qt::black, <span class=\"number\">4</span>));</span><br><span class=\"line\">        painter.<span class=\"built_in\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-40</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">restore</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 绘制分针</span></span><br><span class=\"line\">        painter.<span class=\"built_in\">save</span>();</span><br><span class=\"line\">        painter.<span class=\"built_in\">rotate</span>(<span class=\"number\">6</span> * QTime::<span class=\"built_in\">currentTime</span>().<span class=\"built_in\">minute</span>() + QTime::<span class=\"built_in\">currentTime</span>().<span class=\"built_in\">second</span>() / <span class=\"number\">10.0</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">setPen</span>(<span class=\"built_in\">QPen</span>(Qt::black, <span class=\"number\">3</span>));</span><br><span class=\"line\">        painter.<span class=\"built_in\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-60</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">restore</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 绘制秒针</span></span><br><span class=\"line\">        painter.<span class=\"built_in\">save</span>();</span><br><span class=\"line\">        painter.<span class=\"built_in\">rotate</span>(<span class=\"number\">6</span> * QTime::<span class=\"built_in\">currentTime</span>().<span class=\"built_in\">second</span>());</span><br><span class=\"line\">        painter.<span class=\"built_in\">setPen</span>(<span class=\"built_in\">QPen</span>(Qt::red, <span class=\"number\">2</span>));</span><br><span class=\"line\">        painter.<span class=\"built_in\">drawLine</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">-70</span>);</span><br><span class=\"line\">        painter.<span class=\"built_in\">restore</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"type\">int</span> argc, <span class=\"type\">char</span> *argv[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\">QApplication <span class=\"title\">app</span><span class=\"params\">(argc, argv)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    ClockWidget clock;</span><br><span class=\"line\">    clock.<span class=\"built_in\">show</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> app.<span class=\"built_in\">exec</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的代码中，我们首先创建了一个ClockWidget类，继承自QWidget类，并重写了它的paintEvent函数。在paintEvent函数中，我们使用QPainter类来绘制指针时钟，包括表盘、刻度、时针、分针和秒针等。同时，我们还使用QTimer类来实现时钟的更新，每隔一秒钟就调用一次update函数，重新绘制时钟。</p>\n<p>通过上面的示例代码，我们可以看到Qt绘制指针时钟的过程非常简单，只需要使用QPainter类和QTimer类即可实现。如果您想要进一步了解Qt的绘图和定时器功能，可以参考Qt官方文档或者相关书籍。</p>\n","text":"Qt绘制指针时钟什么是Qt？Qt是一款跨平台的C++应用程序开发框架，它提供了一套完整的工具和库，可以帮助开发者快速构建高质量的应用程序。Qt支持多种操作系统和...","permalink":"/post/Qt/基础教程/Qt绘制指针时钟","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"Qt基础教程","slug":"Qt基础教程","count":19,"path":"api/categories/Qt基础教程.json"}],"tags":[{"name":"Qt","slug":"Qt","count":59,"path":"api/tags/Qt.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Qt%E7%BB%98%E5%88%B6%E6%8C%87%E9%92%88%E6%97%B6%E9%92%9F\"><span class=\"toc-text\">Qt绘制指针时钟</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFQt%EF%BC%9F\"><span class=\"toc-text\">什么是Qt？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8C%87%E9%92%88%E6%97%B6%E9%92%9F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%92%8C%E6%95%88%E6%9E%9C\"><span class=\"toc-text\">指针时钟的作用和效果</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%98%E5%88%B6%E6%8C%87%E9%92%88%E6%97%B6%E9%92%9F%E7%9A%84%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">绘制指针时钟的代码示例</span></a></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Qt使用QSS设置控件样式","uid":"b7a3f67da58560c80fad50efc08e725d","slug":"Qt/基础教程/Qt使用QSS设置控件样式","date":"2021-10-02T02:34:06.000Z","updated":"2023-05-19T05:34:19.705Z","comments":true,"path":"api/articles/Qt/基础教程/Qt使用QSS设置控件样式.json","keywords":null,"cover":null,"text":"Qt使用QSS设置控件样式在这篇文章中，我们将会学习如何使用QSS（Qt样式表）来自定义QPushButton、QLabel、QLineEdit和QComboB...","permalink":"/post/Qt/基础教程/Qt使用QSS设置控件样式","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"Qt基础教程","slug":"Qt基础教程","count":19,"path":"api/categories/Qt基础教程.json"}],"tags":[{"name":"Qt","slug":"Qt","count":59,"path":"api/tags/Qt.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Qt创建一个动画按钮","uid":"6b2f41d280a5ed65f0a5d3dda2e46f20","slug":"Qt/基础教程/Qt创建一个动画按钮","date":"2021-09-28T08:34:06.000Z","updated":"2023-05-19T05:34:19.707Z","comments":true,"path":"api/articles/Qt/基础教程/Qt创建一个动画按钮.json","keywords":null,"cover":null,"text":"Qt创建一个动画按钮在这篇博客中，我们将会学习如何通过使用Qt来创建一个动画按钮。我们将会使用QPropertyAnimation类，它可以使我们控制一个对象的...","permalink":"/post/Qt/基础教程/Qt创建一个动画按钮","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"Qt基础教程","slug":"Qt基础教程","count":19,"path":"api/categories/Qt基础教程.json"}],"tags":[{"name":"Qt","slug":"Qt","count":59,"path":"api/tags/Qt.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}