{"title":"第15节 MFC之复选框及单选按钮","uid":"4cba1917e258f58a831088a0ecbb4f93","slug":"MFC/第15节-MFC之复选框及单选按钮","date":"2017-11-02T15:00:09.000Z","updated":"2023-05-19T05:34:20.889Z","comments":true,"path":"api/articles/MFC/第15节-MFC之复选框及单选按钮.json","keywords":null,"cover":[],"content":"<h1 id=\"Windows编程基础–第15节-MFC之复选框及单选按钮\"><a href=\"#Windows编程基础–第15节-MFC之复选框及单选按钮\" class=\"headerlink\" title=\"Windows编程基础–第15节 MFC之复选框及单选按钮\"></a>Windows编程基础–第15节 MFC之复选框及单选按钮</h1><h2 id=\"1-新建项目\"><a href=\"#1-新建项目\" class=\"headerlink\" title=\"1. 新建项目\"></a>1. 新建项目</h2><p>新建一个基于对话框项目“day17”，布局如下，自行处理：<br><img src=\"http://img.blog.csdn.net/20171102215604038?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<p>拖动三个check box和两个radio button到界面上，设置其ID如下：</p>\n<table>\n<thead>\n<tr>\n<th>控件名</th>\n<th align=\"right\">控件ID</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>红色</td>\n<td align=\"right\">IDC_CHECK_RED</td>\n</tr>\n<tr>\n<td>绿色</td>\n<td align=\"right\">IDC_CHECK_GREEN</td>\n</tr>\n<tr>\n<td>蓝色</td>\n<td align=\"right\">IDC_CHECK_BLUE</td>\n</tr>\n<tr>\n<td>矩形</td>\n<td align=\"right\">IDC_RADIO_SQURAE</td>\n</tr>\n<tr>\n<td>圆形</td>\n<td align=\"right\">IDC_RADIO_CIRC</td>\n</tr>\n<tr>\n<td>执行“工具”-&gt;“tab键位置”，确保两个radio button的顺序是连续的，如下图：</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td><img src=\"http://img.blog.csdn.net/20171102220353696?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td><img src=\"http://img.blog.csdn.net/20171102220403509?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></td>\n<td align=\"right\"></td>\n</tr>\n</tbody></table>\n<p>指定第一个radio button（矩形）的Group的值为true，如图:<br><img src=\"http://img.blog.csdn.net/20171102220705649?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h2 id=\"2-添加关联变量\"><a href=\"#2-添加关联变量\" class=\"headerlink\" title=\"2. 添加关联变量\"></a>2. 添加关联变量</h2><p>添加五个控件的变量，如图：<br><img src=\"http://img.blog.csdn.net/20171102221631588?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DDX_Control(pDX, IDC_CHECK_RED, m_chk_red);</span><br><span class=\"line\">DDX_Control(pDX, IDC_CHECK_GREEN, m_chk_green);</span><br><span class=\"line\">DDX_Control(pDX, IDC_CHECK_BLUE, m_chk_blue);</span><br><span class=\"line\">DDX_Control(pDX, IDC_RADIO_SQURAE, m_rd_squ);</span><br><span class=\"line\">DDX_Control(pDX, IDC_RADIO_CIRC, m_rd_circ);</span><br></pre></td></tr></table></figure>\n<p>分别添加如上变量；</p>\n<h2 id=\"3-开始写代码吧\"><a href=\"#3-开始写代码吧\" class=\"headerlink\" title=\"3. 开始写代码吧\"></a>3. 开始写代码吧</h2><p>现在我们来让程序运行起来时默认选中圆形；<br>切换到解决方案视图，进入BOOL Cday17Dlg::OnInitDialog()方法：<br>在末尾return前加入这一行：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// TODO: 在此添加额外的初始化代码</span><br><span class=\"line\">CheckRadioButton(IDC_RADIO_SQURAE,IDC_RADIO_CIRC,IDC_RADIO_CIRC);</span><br><span class=\"line\"></span><br><span class=\"line\">return TRUE;  // 除非将焦点设置到控件，否则返回 TRUE</span><br></pre></td></tr></table></figure>\n<p>代码解释：</p>\n<blockquote>\n<p>在IDC_RADIO_SQURAE和IDC_RADIO_CIRC之间选中IDC_RADIO_CIRC</p>\n</blockquote>\n<h2 id=\"添加五个控件的事件处理方法\"><a href=\"#添加五个控件的事件处理方法\" class=\"headerlink\" title=\"添加五个控件的事件处理方法\"></a>添加五个控件的事件处理方法</h2><p>如图所示：<br><img src=\"http://img.blog.csdn.net/20171102224705375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>剩下四个都如上添加好；<br>编辑“蓝色”按钮的点击方法：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday17Dlg::OnBnClickedCheckBlue()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加控件通知处理程序代码</span><br><span class=\"line\">\tInvalidate();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>代码解释：</p>\n<blockquote>\n<p>Invalidate()让对话框重汇对话框；</p>\n</blockquote>\n<h2 id=\"添加擦除背景消息（OnEraseBkgnd）事件\"><a href=\"#添加擦除背景消息（OnEraseBkgnd）事件\" class=\"headerlink\" title=\"添加擦除背景消息（OnEraseBkgnd）事件\"></a>添加擦除背景消息（OnEraseBkgnd）事件</h2><p>如图添加OnEraseBkgnd消息处理函数：<br><img src=\"http://img.blog.csdn.net/20171102225056653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>编辑OnEraseBkgnd函数：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BOOL Cday17Dlg::OnEraseBkgnd(CDC* pDC)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加消息处理程序代码和/或调用默认值</span><br><span class=\"line\">\tBOOL bRet = CDialogEx::OnEraseBkgnd(pDC);</span><br><span class=\"line\">\tint nRed,nGreen,nBlue;</span><br><span class=\"line\">\tnRed = m_chk_red.GetCheck() ? 255 : 0;</span><br><span class=\"line\">\tnGreen = m_chk_green.GetCheck() ? 255 : 0;</span><br><span class=\"line\">\tnBlue = m_chk_blue.GetCheck() ? 255 : 0;</span><br><span class=\"line\"></span><br><span class=\"line\">\tCOLORREF crFore = RGB(nRed,nGreen,nBlue);</span><br><span class=\"line\">\tCBrush brush;</span><br><span class=\"line\">\tbrush.CreateSolidBrush(crFore);</span><br><span class=\"line\">\tCBrush *pOldBrush = pDC-&gt;SelectObject(&amp;brush);</span><br><span class=\"line\"></span><br><span class=\"line\">\tRECT rc = &#123;100, 40, 400, 340&#125;;</span><br><span class=\"line\">\tif (m_rd_squ.GetCheck())</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tpDC-&gt;Rectangle(&amp;rc);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\telse&#123;</span><br><span class=\"line\">\t\tpDC-&gt;Ellipse(&amp;rc);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tpDC-&gt;SelectObject(pOldBrush);</span><br><span class=\"line\">\treturn bRet;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>代码解释：</p>\n<blockquote>\n<ol>\n<li>根据颜色按钮的选择状态来选择颜色为255还是0；</li>\n<li>用三个的颜色来创建一个画刷；</li>\n<li>保留旧的画刷；</li>\n<li>创建RECT 对象，即圆形的大小；</li>\n<li>根据形状的radio button来选择化圆形还是矩形；</li>\n<li>还原旧的画刷；</li>\n</ol>\n</blockquote>\n<h2 id=\"实现其他按钮\"><a href=\"#实现其他按钮\" class=\"headerlink\" title=\"实现其他按钮\"></a>实现其他按钮</h2><p>其他按钮就只用调用OnBnClickedCheckBlue()就可以了；</p>\n<h1 id=\"最终效果图：\"><a href=\"#最终效果图：\" class=\"headerlink\" title=\"最终效果图：\"></a>最终效果图：</h1><p><img src=\"http://img.blog.csdn.net/20171102225829436?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"项目源码可以访问我的码云\"><a href=\"#项目源码可以访问我的码云\" class=\"headerlink\" title=\"项目源码可以访问我的码云\"></a><a href=\"https://gitee.com/AmuUncle/MFC_CSDN.git\">项目源码可以访问我的码云</a></h3><h3 id=\"我的私人博客\"><a href=\"#我的私人博客\" class=\"headerlink\" title=\"&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;\"></a><a href=\"http://blog.amuuncle.site/\">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</a></h3>","text":"Windows编程基础–第15节 MFC之复选框及单选按钮1. 新建项目新建一个基于对话框项目“day17”，布局如下，自行处理： 拖动三个check box和...","permalink":"/post/MFC/第15节-MFC之复选框及单选按钮","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Windows%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E2%80%93%E7%AC%AC15%E8%8A%82-MFC%E4%B9%8B%E5%A4%8D%E9%80%89%E6%A1%86%E5%8F%8A%E5%8D%95%E9%80%89%E6%8C%89%E9%92%AE\"><span class=\"toc-text\">Windows编程基础–第15节 MFC之复选框及单选按钮</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">1. 新建项目</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E6%B7%BB%E5%8A%A0%E5%85%B3%E8%81%94%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">2. 添加关联变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E5%BC%80%E5%A7%8B%E5%86%99%E4%BB%A3%E7%A0%81%E5%90%A7\"><span class=\"toc-text\">3. 开始写代码吧</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E4%BA%94%E4%B8%AA%E6%8E%A7%E4%BB%B6%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">添加五个控件的事件处理方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E6%93%A6%E9%99%A4%E8%83%8C%E6%99%AF%E6%B6%88%E6%81%AF%EF%BC%88OnEraseBkgnd%EF%BC%89%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">添加擦除背景消息（OnEraseBkgnd）事件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%E5%85%B6%E4%BB%96%E6%8C%89%E9%92%AE\"><span class=\"toc-text\">实现其他按钮</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%9A\"><span class=\"toc-text\">最终效果图：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%88%91%E7%9A%84%E7%A0%81%E4%BA%91\"><span class=\"toc-text\">项目源码可以访问我的码云</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%88%91%E7%9A%84%E7%A7%81%E4%BA%BA%E5%8D%9A%E5%AE%A2\"><span class=\"toc-text\">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</span></a></li></ol></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"第16节 MFC之SendMessage和PostMessage","uid":"5ea2af3786de0c1e89d3cfbe74111832","slug":"MFC/第16节-MFC之SendMessage和PostMessage","date":"2017-11-04T15:33:16.000Z","updated":"2023-05-19T05:34:20.890Z","comments":true,"path":"api/articles/MFC/第16节-MFC之SendMessage和PostMessage.json","keywords":null,"cover":[],"text":" 1、PostMessage会将消息压入窗口所在线程的消息队列，然后返回；而SendMessage则不经过消息队列，SendMessage可认为是直接调用了该窗...","permalink":"/post/MFC/第16节-MFC之SendMessage和PostMessage","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"12 mins."},"categories":[],"tags":[],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"第14节 MFC之文件对话框CFileDialog","uid":"236b306ed30598f9de558dada84c87a9","slug":"MFC/第14节-MFC之文件对话框CFileDialog","date":"2017-11-01T13:49:20.000Z","updated":"2023-05-19T05:34:20.889Z","comments":true,"path":"api/articles/MFC/第14节-MFC之文件对话框CFileDialog.json","keywords":null,"cover":[],"text":"第14节 MFC之文件对话框CFileDialog 今天我们学习两个打开文件对话框、保存文件对话框，应用程序难免需要加载文件，或者打开配置文件等，这就用到打开或...","permalink":"/post/MFC/第14节-MFC之文件对话框CFileDialog","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}