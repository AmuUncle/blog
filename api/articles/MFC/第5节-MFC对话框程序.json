{"title":"第5节 MFC对话框程序","uid":"d41da3519676c2875183fa7ba0389f75","slug":"MFC/第5节-MFC对话框程序","date":"2017-10-28T15:31:35.000Z","updated":"2023-05-19T05:34:20.891Z","comments":true,"path":"api/articles/MFC/第5节-MFC对话框程序.json","keywords":null,"cover":[],"content":"<h1 id=\"Windows编程基础–第5节-MFC对话框程序\"><a href=\"#Windows编程基础–第5节-MFC对话框程序\" class=\"headerlink\" title=\"Windows编程基础–第5节 MFC对话框程序\"></a>Windows编程基础–第5节 MFC对话框程序</h1><h2 id=\"模式对话框\"><a href=\"#模式对话框\" class=\"headerlink\" title=\"模式对话框\"></a>模式对话框</h2><hr>\n<p>对话框程序是MFC最重要的组成部分，也是Visual C++中唯一可以可视化设计的窗口程序，对话框主要有两类：</p>\n<blockquote>\n<ul>\n<li>模式对话框：必须关闭这个对话框才能继续操作父窗口或者上一级窗口</li>\n<li>非模式对话框:不影响父窗口或者上一级窗口，可继续操作父窗口或者上一级窗口，对话框程序也可以一直保留，无需关闭才能执行下一步；</li>\n</ul>\n</blockquote>\n<p>接来下我们先一起学习模式对话框；</p>\n<h3 id=\"1-新建项目\"><a href=\"#1-新建项目\" class=\"headerlink\" title=\"1. 新建项目\"></a>1. 新建项目</h3><p>建立一个MFC的主对话框项目day04，参见上节，添加两个按钮，分别为“关于”，“聊天”，如图所示：<br><img src=\"http://img.blog.csdn.net/20171021224403317?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"2-添加关于对话框\"><a href=\"#2-添加关于对话框\" class=\"headerlink\" title=\"2. 添加关于对话框\"></a>2. 添加关于对话框</h3><p>在资源视图（ResourceView）中Dialog上右击-&gt;Insert Diallog，插入对话框，如图所示：<br><img src=\"http://img.blog.csdn.net/20171021225345643?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br><img src=\"http://img.blog.csdn.net/20171021225356308?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"3-添加关于对话框类\"><a href=\"#3-添加关于对话框类\" class=\"headerlink\" title=\"3. 添加关于对话框类\"></a>3. 添加关于对话框类</h3><p>单击添加的关于对话框，执行View-&gt;Class Wizard，或者使用快捷键Ctrl + W打开类向导；<br>由于新的对话框不存在关联类，此时会提示创建一个与它相关联的类，选择Create a new class,单击OK创建关联类，如下图所示：<br><img src=\"http://img.blog.csdn.net/20171021225816356?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br><img src=\"http://img.blog.csdn.net/20171021225906889?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>单击OK完成创建关联类；<br><img src=\"http://img.blog.csdn.net/20171021230017929?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"3-添加关于按钮消息事件\"><a href=\"#3-添加关于按钮消息事件\" class=\"headerlink\" title=\"3. 添加关于按钮消息事件\"></a>3. 添加关于按钮消息事件</h3><p>切换回主对话框，单击主对话框，执行View-&gt;Class Wizard，或者使用快捷键Ctrl + W打开类向导；选择关于按钮，增加clicked方法，然后Edit Code编辑关于按钮的响应方法，或者可以直接双击“关于”按钮就可以直接进入按钮点击方法，在day04Dlg.h中添加“#include AboutDlg.h”来引入对话框类，然后我们来编辑关于按键方法，创建一个模式对话框；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void CDay04Dlg::OnButtonAbout() </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: Add your control notification handler code here</span><br><span class=\"line\">\tCAboutDlg dlg;</span><br><span class=\"line\">\tdlg.DoModal();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果图：<br><img src=\"http://img.blog.csdn.net/20171021231034007?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>至此，一个模式对话框就创建成功了，我们可以看到，我们必须关闭关于对话框，才能单击主对话框。</p>\n<h2 id=\"非模式对话框\"><a href=\"#非模式对话框\" class=\"headerlink\" title=\"非模式对话框\"></a>非模式对话框</h2><p>现在我们来创建一个非模式对话框；</p>\n<h3 id=\"1-添加聊天对话框\"><a href=\"#1-添加聊天对话框\" class=\"headerlink\" title=\"1. 添加聊天对话框\"></a>1. 添加聊天对话框</h3><p>在资源视图（ResourceView）中Dialog上右击-&gt;Insert Diallog，插入对话框，如图所示：<br><img src=\"http://img.blog.csdn.net/20171021231642278?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"2-添加聊天对话框类\"><a href=\"#2-添加聊天对话框类\" class=\"headerlink\" title=\"2. 添加聊天对话框类\"></a>2. 添加聊天对话框类</h3><p>单击添加的关于对话框，执行View-&gt;Class Wizard，或者使用快捷键Ctrl + W打开类向导；<br>由于新的对话框不存在关联类，此时会提示创建一个与它相关联的类，选择Create a new class,单击OK创建关联类，如上面步骤3</p>\n<h3 id=\"3-添加聊天按钮消息事件\"><a href=\"#3-添加聊天按钮消息事件\" class=\"headerlink\" title=\"3. 添加聊天按钮消息事件\"></a>3. 添加聊天按钮消息事件</h3><p>切换回主对话框，单击主对话框，执行View-&gt;Class Wizard，或者使用快捷键Ctrl + W打开类向导；选择聊天按钮，增加clicked方法，然后Edit Code编辑关于按钮的响应方法，或者可以直接双击“聊天”按钮就可以直接进入按钮点击方法，在day04Dlg.h中添加“#include “Chat.h””来引入对话框类，然后我们来编辑聊天按键方法，创建一个非模式对话框；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void CDay04Dlg::OnButtonChat() </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: Add your control notification handler code here</span><br><span class=\"line\">\tCChat * pDlg = new CChat;</span><br><span class=\"line\">\tpDlg-&gt;Create(IDD_DIALOG_CHAT);</span><br><span class=\"line\">\tpDlg-&gt;ShowWindow(SW_SHOW);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果图：<br><img src=\"http://img.blog.csdn.net/20171021232153087?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br><img src=\"http://img.blog.csdn.net/20171021232202529?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>至此，一个非模式对话框就创建成功了，我们可以看到，我们打开聊天界面后还可以继续操作父窗口中的关于对话框，甚至还可以单击聊天对话框创建多个聊天界面；<br><img src=\"http://img.blog.csdn.net/20171021232914420?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"项目源码可以访问我的码云\"><a href=\"#项目源码可以访问我的码云\" class=\"headerlink\" title=\"项目源码可以访问我的码云\"></a><a href=\"https://gitee.com/AmuUncle/MFC_CSDN.git\">项目源码可以访问我的码云</a></h3>","text":"Windows编程基础–第5节 MFC对话框程序模式对话框 对话框程序是MFC最重要的组成部分，也是Visual C++中唯一可以可视化设计的窗口程序，对话框主...","permalink":"/post/MFC/第5节-MFC对话框程序","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Windows%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E2%80%93%E7%AC%AC5%E8%8A%82-MFC%E5%AF%B9%E8%AF%9D%E6%A1%86%E7%A8%8B%E5%BA%8F\"><span class=\"toc-text\">Windows编程基础–第5节 MFC对话框程序</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%BC%8F%E5%AF%B9%E8%AF%9D%E6%A1%86\"><span class=\"toc-text\">模式对话框</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">1. 新建项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%B7%BB%E5%8A%A0%E5%85%B3%E4%BA%8E%E5%AF%B9%E8%AF%9D%E6%A1%86\"><span class=\"toc-text\">2. 添加关于对话框</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%B7%BB%E5%8A%A0%E5%85%B3%E4%BA%8E%E5%AF%B9%E8%AF%9D%E6%A1%86%E7%B1%BB\"><span class=\"toc-text\">3. 添加关于对话框类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%B7%BB%E5%8A%A0%E5%85%B3%E4%BA%8E%E6%8C%89%E9%92%AE%E6%B6%88%E6%81%AF%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">3. 添加关于按钮消息事件</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%9D%9E%E6%A8%A1%E5%BC%8F%E5%AF%B9%E8%AF%9D%E6%A1%86\"><span class=\"toc-text\">非模式对话框</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%B7%BB%E5%8A%A0%E8%81%8A%E5%A4%A9%E5%AF%B9%E8%AF%9D%E6%A1%86\"><span class=\"toc-text\">1. 添加聊天对话框</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%B7%BB%E5%8A%A0%E8%81%8A%E5%A4%A9%E5%AF%B9%E8%AF%9D%E6%A1%86%E7%B1%BB\"><span class=\"toc-text\">2. 添加聊天对话框类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E6%B7%BB%E5%8A%A0%E8%81%8A%E5%A4%A9%E6%8C%89%E9%92%AE%E6%B6%88%E6%81%AF%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">3. 添加聊天按钮消息事件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%88%91%E7%9A%84%E7%A0%81%E4%BA%91\"><span class=\"toc-text\">项目源码可以访问我的码云</span></a></li></ol></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"第6节 VC++6.0控件说明","uid":"9179eacff46448e05283197250e564aa","slug":"MFC/第6节-VC-6-0控件说明","date":"2017-10-28T15:32:11.000Z","updated":"2023-05-19T05:34:20.892Z","comments":true,"path":"api/articles/MFC/第6节-VC-6-0控件说明.json","keywords":null,"cover":[],"text":"Windows编程基础–第6节 VC++6.0控件说明VC++6.0控件工具箱 控件说明 2 图形控件（picture）：常用于显示位图（Bitmap）和图标（...","permalink":"/post/MFC/第6节-VC-6-0控件说明","photos":[],"count_time":{"symbolsCount":"24k","symbolsTime":"22 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"第4节 MFC消息映射机制","uid":"2f4d7dd6c64cb6ac7562ed9535f84aaa","slug":"MFC/第4节-MFC消息映射机制","date":"2017-10-28T15:30:28.000Z","updated":"2023-05-19T05:34:20.890Z","comments":true,"path":"api/articles/MFC/第4节-MFC消息映射机制.json","keywords":null,"cover":[],"text":"Windows编程基础–第4节 MFC消息映射机制对于MFC程序最重要的响应机制就是消息映射机制，这节我们就来一起尝试一下MFC的消息映射机制。（操作系统：wi...","permalink":"/post/MFC/第4节-MFC消息映射机制","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}