{"title":"第8节 MFC对话框控件访问的七种方法（上）","uid":"89acd55286d16d2f969d7ac76f20c8d8","slug":"MFC/第8节-MFC对话框控件访问的七种方法（上）","date":"2017-10-28T15:32:43.000Z","updated":"2023-05-19T05:34:20.913Z","comments":true,"path":"api/articles/MFC/第8节-MFC对话框控件访问的七种方法（上）.json","keywords":null,"cover":[],"content":"<h1 id=\"Windows编程基础–第8节-MFC对话框控件访问的七种方法（上）\"><a href=\"#Windows编程基础–第8节-MFC对话框控件访问的七种方法（上）\" class=\"headerlink\" title=\"Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）\"></a>Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）</h1><p>MFC对话框控件具有以下三种访问方式(当然还有很多别的访问方式，今天时间紧急，先学这三种)，分别是：</p>\n<blockquote>\n<p>第一种<br>GetDlgItem()-&gt;GetWindowText()<br>GetDlgItem()-&gt;SetWindowText()</p>\n<p>第二种<br>GetDlgItemText()</p>\n</blockquote>\n<blockquote>\n<p>第三种<br>GetDlgItemInt()<br>SetDlgItemInt()</p>\n</blockquote>\n<h3 id=\"1-新建一个对话框项目\"><a href=\"#1-新建一个对话框项目\" class=\"headerlink\" title=\"1.新建一个对话框项目\"></a>1.新建一个对话框项目</h3><p>参见上节，我们这节采用VS2010编写一个身高体重计算器（BMI），参见 <a href=\"http://blog.csdn.net/qq_25549309/article/details/78277801\">第二节</a>；</p>\n<h3 id=\"2-布局\"><a href=\"#2-布局\" class=\"headerlink\" title=\"2.布局\"></a>2.布局</h3><p>编辑布局如下：<br><img src=\"http://img.blog.csdn.net/20171024220008701?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<table>\n<thead>\n<tr>\n<th>EDIT名称</th>\n<th align=\"right\">ID</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>身高</td>\n<td align=\"right\">IDC_EDIT_SG</td>\n</tr>\n<tr>\n<td>体重</td>\n<td align=\"right\">IDC_EDIT_TZ</td>\n</tr>\n<tr>\n<td>BMI</td>\n<td align=\"right\">IDC_EDIT_BMI</td>\n</tr>\n</tbody></table>\n<h3 id=\"3-实现方法\"><a href=\"#3-实现方法\" class=\"headerlink\" title=\"3.实现方法\"></a>3.实现方法</h3><p>双击确认按钮，编辑其点击消息处理函数；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday08Dlg::OnBnClickedOk()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加控件通知处理程序代码</span><br><span class=\"line\">\tint nHeight= GetDlgItemInt(IDC_EDIT_SG,NULL,TRUE);</span><br><span class=\"line\">\tdouble dHeight = nHeight / 100.00;</span><br><span class=\"line\">\tint nWeight = GetDlgItemInt(IDC_EDIT_TZ,NULL,TRUE);</span><br><span class=\"line\">\tdouble bmi = nWeight/(dHeight*dHeight);</span><br><span class=\"line\">\tchar buf[28];</span><br><span class=\"line\">\tsprintf(buf, &quot;%.3f&quot;, bmi);</span><br><span class=\"line\">\tSetDlgItemText(IDC_EDIT_BMI,buf);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这里可以看见使用到了GetDlgItemInt，这就是直接获取文本框的值，并返回为整形，然后用sprintf(buf, “%.3f”, bmi);将double类型值转换成字符串，并通过SetDlgItemText将字符串的值设置到ID为IDC_EDIT_BMI的文本框上；</p>\n<h3 id=\"4-编译运行\"><a href=\"#4-编译运行\" class=\"headerlink\" title=\"4.编译运行\"></a>4.编译运行</h3><p>估计很多人会像我一样，VS2010会报这样的错误：<br><img src=\"http://img.blog.csdn.net/20171024221112999?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>这是因为我们创建的项目的字符集为Unicode，不允许这样转换，这时我们只要将解决方案中右击项目名“day09”-&gt;“属性”-&gt;“配置属性”-&gt;”常规”-&gt;”字符集”-&gt;选择“使用多字节字符集”就好了，如下:<br><img src=\"http://img.blog.csdn.net/20171024221553536?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br><img src=\"http://img.blog.csdn.net/20171024221603771?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>这时就可以通过编译，运行结果如下：<br><img src=\"http://img.blog.csdn.net/20171024221658382?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"5-其他方法\"><a href=\"#5-其他方法\" class=\"headerlink\" title=\"5.其他方法\"></a>5.其他方法</h3><p>再次编辑“确认”按钮的点击消息处理函数；<br><strong>第二种</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday08Dlg::OnBnClickedOk()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加控件通知处理程序代码</span><br><span class=\"line\">\tTCHAR tcHeight[10], tcWeight[10];</span><br><span class=\"line\">\tGetDlgItem(IDC_EDIT_SG)-&gt;GetWindowText(tcHeight,10);</span><br><span class=\"line\">\tGetDlgItem(IDC_EDIT_TZ)-&gt;GetWindowText(tcWeight,10);</span><br><span class=\"line\"></span><br><span class=\"line\">\tint nHeight = _ttoi(tcHeight);</span><br><span class=\"line\">\tdouble dHeight = nHeight / 100.00;</span><br><span class=\"line\">\tint nWeight = _ttoi(tcWeight);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tdouble bmi = nWeight/(dHeight * dHeight);</span><br><span class=\"line\">\tchar buf[28];</span><br><span class=\"line\">\tsprintf(buf, &quot;%.3f&quot;, bmi);</span><br><span class=\"line\">\tGetDlgItem(IDC_EDIT_BMI)-&gt;SetWindowText(buf);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以看见，这里用到了GetDlgItem(IDC_EDIT_SG)-&gt;GetWindowText(tcHeight,10)方法，这个方法的过程就是先通过GetDlgItem(IDC_EDIT_SG)获取到控件对象，然后调用控件的GetWindowText(tcHeight,10)方法来获取控件的显示文本；</p>\n<p><strong>第三种</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday08Dlg::OnBnClickedOk()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tTCHAR tcHeight[10], tcWeight[10] , tcBMI[10];</span><br><span class=\"line\">\tGetDlgItemText(IDC_EDIT_SG,tcHeight,10);</span><br><span class=\"line\">\tGetDlgItemText(IDC_EDIT_TZ,tcWeight,10);</span><br><span class=\"line\"></span><br><span class=\"line\">\tint nHeight = _ttoi(tcHeight);</span><br><span class=\"line\">\tdouble dHeight = nHeight / 100.00;</span><br><span class=\"line\">\tint nWeight = _ttoi(tcWeight);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tdouble bmi = nWeight/(dHeight * dHeight);</span><br><span class=\"line\">\tchar buf[28];</span><br><span class=\"line\">\tsprintf(buf, &quot;%.3f&quot;, bmi);</span><br><span class=\"line\">\tSetDlgItemText(IDC_EDIT_BMI,buf);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>可以看见，这里直接用到了GetDlgItemText(IDC_EDIT_SG,tcHeight,10)方法，这个方法的过程就是先通过GetDlgItem(IDC_EDIT_SG)获取到控件对象，然后调用控件的GetWindowText(tcHeight,10)方法来设置控件的显示文本；</p>\n<p><em>虽然上面三种方法最终结果是一样的，但是其本质还是有所区别的</em></p>\n<h3 id=\"项目源码可以访问我的码云\"><a href=\"#项目源码可以访问我的码云\" class=\"headerlink\" title=\"项目源码可以访问我的码云\"></a><a href=\"https://gitee.com/AmuUncle/MFC_CSDN.git\">项目源码可以访问我的码云</a></h3>","text":"Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）MFC对话框控件具有以下三种访问方式(当然还有很多别的访问方式，今天时间紧急，先学这三种)，...","permalink":"/post/MFC/第8节-MFC对话框控件访问的七种方法（上）","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Windows%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E2%80%93%E7%AC%AC8%E8%8A%82-MFC%E5%AF%B9%E8%AF%9D%E6%A1%86%E6%8E%A7%E4%BB%B6%E8%AE%BF%E9%97%AE%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%88%E4%B8%8A%EF%BC%89\"><span class=\"toc-text\">Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%AF%9D%E6%A1%86%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">1.新建一个对话框项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%B8%83%E5%B1%80\"><span class=\"toc-text\">2.布局</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">3.实现方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">4.编译运行</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">5.其他方法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%88%91%E7%9A%84%E7%A0%81%E4%BA%91\"><span class=\"toc-text\">项目源码可以访问我的码云</span></a></li></ol></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"第9节 MFC对话框控件访问的七种方法（下）","uid":"d5ebde1940644a1d236c756a4a2c1627","slug":"MFC/第9节-MFC对话框控件访问的七种方法（下）","date":"2017-10-28T15:33:13.000Z","updated":"2023-05-19T05:34:20.913Z","comments":true,"path":"api/articles/MFC/第9节-MFC对话框控件访问的七种方法（下）.json","keywords":null,"cover":[],"text":"Windows编程基础–第9节 MFC对话框控件访问的七种方法（下）上节学习了MFC访问控件的三种方法，这节我们来学习剩下的四种方法，四种方法分别如下： 第四种...","permalink":"/post/MFC/第9节-MFC对话框控件访问的七种方法（下）","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"第7节 来吧，VS 2010","uid":"b83dba6958730d41cfeb66ec4a2f0efa","slug":"MFC/第7节-来吧，VS-2010","date":"2017-10-28T15:32:25.000Z","updated":"2023-05-19T05:34:20.892Z","comments":true,"path":"api/articles/MFC/第7节-来吧，VS-2010.json","keywords":null,"cover":[],"text":"Windows编程基础–第7节 来吧，VS 2010VS 2010开发第一步 前面几节我们都是采用VC++ 6.0 作为IDE（集成开发环境），但是由于**VC...","permalink":"/post/MFC/第7节-来吧，VS-2010","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}