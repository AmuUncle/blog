{"title":"第10节 MFC菜单","uid":"0686f7c34d3d8d3e03a82f60ca6790dd","slug":"MFC/第10节-MFC菜单","date":"2017-10-28T15:33:24.000Z","updated":"2023-05-19T05:34:20.888Z","comments":true,"path":"api/articles/MFC/第10节-MFC菜单.json","keywords":null,"cover":[],"content":"<h1 id=\"Windows编程基础–第10节-MFC菜单\"><a href=\"#Windows编程基础–第10节-MFC菜单\" class=\"headerlink\" title=\"Windows编程基础–第10节 MFC菜单\"></a>Windows编程基础–第10节 MFC菜单</h1><h1 id=\"MFC菜单（CMenu）\"><a href=\"#MFC菜单（CMenu）\" class=\"headerlink\" title=\"MFC菜单（CMenu）\"></a>MFC菜单（CMenu）</h1><p>MFC菜单分为两类：</p>\n<blockquote>\n<p>窗体菜单<br>快捷菜单:又叫弹出菜单，或者上下文菜单</p>\n</blockquote>\n<h3 id=\"1、创建项目\"><a href=\"#1、创建项目\" class=\"headerlink\" title=\"1、创建项目\"></a>1、创建项目</h3><p>打开vs2010，创建一个基于对话框的项目，项目名“day10”,注意这次主框架中就不要勾选“系统菜单”和“关于框”了，如图：<br><img src=\"http://img.blog.csdn.net/20171026223157074?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>创建好后，删除自动生成的文本控件，如图：<br><img src=\"http://img.blog.csdn.net/20171026223358413?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"2、创建系统菜单\"><a href=\"#2、创建系统菜单\" class=\"headerlink\" title=\"2、创建系统菜单\"></a>2、创建系统菜单</h3><p>切换到资源视图，右击我们的项目“day10”，选择添加资源，出现如下界面：<br><img src=\"http://img.blog.csdn.net/20171026223840662?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<p><img src=\"http://img.blog.csdn.net/20171026223849482?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>选择“Menu”点击新建,然后就可以看到我们的项目中Menu目录，这里就存放菜单资源，展开后就可以看到，我们刚添加的菜单ID，双击打开；<br>我们可以直接输入想要添加的菜单选项，如图：<br><img src=\"http://img.blog.csdn.net/20171026225016056?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>我们可以在资源视图右击菜单ID，然后选择属性，修改ID为IDR_MENU_SYSTEM;</p>\n<h3 id=\"3、显示系统菜单\"><a href=\"#3、显示系统菜单\" class=\"headerlink\" title=\"3、显示系统菜单\"></a>3、显示系统菜单</h3><p>我们打开刚才创建的主窗口，右击打开属性，在属性列表找到MENU属性，下拉框选择刚才创建的IDR_MENU_SYSTEM菜单，如图所示：<br><img src=\"http://img.blog.csdn.net/20171026225352426?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>这时主窗口就和IDR_MENU_SYSTEM菜单关联起来了，运行看看效果：<br><img src=\"http://img.blog.csdn.net/20171026225644814?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"4、创建菜单消息事件\"><a href=\"#4、创建菜单消息事件\" class=\"headerlink\" title=\"4、创建菜单消息事件\"></a>4、创建菜单消息事件</h3><p>我们切换到我们创建的菜单界面，来实现菜单中保存选项的处理事件，在“保存”选项上右击，选择“添加事件处理函数”，如下：<br><img src=\"http://img.blog.csdn.net/20171026225912317?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>，出现如下添加事件界面：<br><img src=\"http://img.blog.csdn.net/20171026230051574?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>这里我们类列表中选择Cday10Dlg中创建操作函数，函数名修改为OnMenuSaveClick，点击“添加编辑”，添加处理函数；</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday10Dlg::OnMenuSaveClick()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加命令处理程序代码</span><br><span class=\"line\">\tAfxMessageBox(_T(&quot;文件已保存！&quot;));  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>运行效果，点击“文件”-&gt;“保存”,此时就会弹窗提示“””文件已保存！”，如图所示：<br><img src=\"http://img.blog.csdn.net/20171026230628546?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"5、创建快捷菜单\"><a href=\"#5、创建快捷菜单\" class=\"headerlink\" title=\"5、创建快捷菜单\"></a>5、创建快捷菜单</h3><p>切换资源视图，<br>选择“Menu”点击“插入MENU”,自动打开；我们可以直接输入想要添加的菜单选项，如图：<br><img src=\"http://img.blog.csdn.net/20171026231003422?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>注意：快捷菜单中最上面的“快捷菜单”不会显示，名字可以随意。<br>修改次menu的ID为IDR_MENU_QUICK；</p>\n<h3 id=\"6、显示快捷菜单\"><a href=\"#6、显示快捷菜单\" class=\"headerlink\" title=\"6、显示快捷菜单\"></a>6、显示快捷菜单</h3><p>我们打开刚才创建的主窗口，右击打开属性，在属性列表上方选择“消息”<img src=\"http://img.blog.csdn.net/20171026234537989?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\">按钮，找到“WM_OnContextMenu”,选择add OnContextMenu方法，如图所示：<br><img src=\"http://img.blog.csdn.net/20171026231615024?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday10Dlg::OnContextMenu(CWnd* pWnd, CPoint point)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此处添加消息处理程序代码</span><br><span class=\"line\">\tCMenu menu;</span><br><span class=\"line\">\tif(!menu.LoadMenu(IDR_MENU_QUICK))</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\treturn;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tCMenu* pMenu = menu.GetSubMenu(0);</span><br><span class=\"line\">\tpMenu-&gt;TrackPopupMenu(TPM_LEFTALIGN|TPM_RIGHTBUTTON,point.x,point.y,pWnd);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这段代码的意思就是：先试图加载IDR_MENU_QUICK菜单，加载成功之后，将菜单显示在鼠标右击（TPM_RIGHTBUTTON），靠左方（TPM_LEFTALIGN）的位置；<br>运行效果：<br><img src=\"http://img.blog.csdn.net/20171026232302952?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>可以看见，菜单已经显示出来；</p>\n<h3 id=\"7、创建菜单消息事件\"><a href=\"#7、创建菜单消息事件\" class=\"headerlink\" title=\"7、创建菜单消息事件\"></a>7、创建菜单消息事件</h3><p>同步骤4，如图：<br><img src=\"http://img.blog.csdn.net/20171026232540747?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"><br>编辑OnCopy函数，如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void Cday10Dlg::OnCopy()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t// TODO: 在此添加命令处理程序代码</span><br><span class=\"line\">\t\tAfxMessageBox(_T(&quot;文件已复制！&quot;));  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>效果图：<br><img src=\"http://img.blog.csdn.net/20171026232658919?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"项目源码可以访问我的码云\"><a href=\"#项目源码可以访问我的码云\" class=\"headerlink\" title=\"项目源码可以访问我的码云\"></a><a href=\"https://gitee.com/AmuUncle/MFC_CSDN.git\">项目源码可以访问我的码云</a></h3>","text":"Windows编程基础–第10节 MFC菜单MFC菜单（CMenu）MFC菜单分为两类： 窗体菜单快捷菜单:又叫弹出菜单，或者上下文菜单 1、创建项目打开vs2...","permalink":"/post/MFC/第10节-MFC菜单","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Windows%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%E2%80%93%E7%AC%AC10%E8%8A%82-MFC%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">Windows编程基础–第10节 MFC菜单</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MFC%E8%8F%9C%E5%8D%95%EF%BC%88CMenu%EF%BC%89\"><span class=\"toc-text\">MFC菜单（CMenu）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">1、创建项目</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E5%88%9B%E5%BB%BA%E7%B3%BB%E7%BB%9F%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">2、创建系统菜单</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E6%98%BE%E7%A4%BA%E7%B3%BB%E7%BB%9F%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">3、显示系统菜单</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E6%B6%88%E6%81%AF%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">4、创建菜单消息事件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81%E5%88%9B%E5%BB%BA%E5%BF%AB%E6%8D%B7%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">5、创建快捷菜单</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6%E3%80%81%E6%98%BE%E7%A4%BA%E5%BF%AB%E6%8D%B7%E8%8F%9C%E5%8D%95\"><span class=\"toc-text\">6、显示快捷菜单</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E6%B6%88%E6%81%AF%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">7、创建菜单消息事件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%88%91%E7%9A%84%E7%A0%81%E4%BA%91\"><span class=\"toc-text\">项目源码可以访问我的码云</span></a></li></ol></li></ol></li></ol>","author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"工具使用--第1节 git使用简记","uid":"1af68f9dfe3c7e2933ac93e37e9817a4","slug":"WEB/工具使用-第1节-git使用简记","date":"2017-10-28T15:38:48.000Z","updated":"2023-05-19T05:34:20.886Z","comments":true,"path":"api/articles/WEB/工具使用-第1节-git使用简记.json","keywords":null,"cover":[],"text":"工具使用–第1节 git使用简记GIT （分布式版本控制系统） Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。 Git的读音...","permalink":"/post/WEB/工具使用-第1节-git使用简记","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"git教程","slug":"git教程","count":1,"path":"api/categories/git教程.json"}],"tags":[{"name":"GIT","slug":"GIT","count":1,"path":"api/tags/GIT.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"第9节 MFC对话框控件访问的七种方法（下）","uid":"d5ebde1940644a1d236c756a4a2c1627","slug":"MFC/第9节-MFC对话框控件访问的七种方法（下）","date":"2017-10-28T15:33:13.000Z","updated":"2023-05-19T05:34:20.913Z","comments":true,"path":"api/articles/MFC/第9节-MFC对话框控件访问的七种方法（下）.json","keywords":null,"cover":[],"text":"Windows编程基础–第9节 MFC对话框控件访问的七种方法（下）上节学习了MFC访问控件的三种方法，这节我们来学习剩下的四种方法，四种方法分别如下： 第四种...","permalink":"/post/MFC/第9节-MFC对话框控件访问的七种方法（下）","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"MFC从入门到放弃","slug":"MFC从入门到放弃","count":15,"path":"api/categories/MFC从入门到放弃.json"}],"tags":[{"name":"MFC","slug":"MFC","count":15,"path":"api/tags/MFC.json"}],"author":{"name":"阿木大叔","slug":"blog-author","avatar":"/images/base/logo.png","link":"/","description":"坚持code，努力吹牛 <br /> @ <b>gitee：阿木大叔</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}